{"ast":null,"code":"import _toConsumableArray from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/*\r\ncomposant affichant la liste du personnel actif ainsi que les inactifs\r\n */import React,{useState,useEffect}from'react';import{DragDropContext}from'react-beautiful-dnd';import ActiveHumans from'./activeHumans';import InactiveHumans from'./InactiveHumans';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function HumanList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),inactiveUsers=_useState2[0],setInactiveUsers=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),activeUsers=_useState4[0],setActiveUsers=_useState4[1];useEffect(function(){fetch('/wp-json/booker67/v1/human_ressources_actif',{// Ajustez l'URL en fonction de votre API\nheaders:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){setActiveUsers(data);// setLoading(false); plus de loader pour le moment\n}).catch(function(error){return console.error('Error fetching active users:',error);});},[]);useEffect(function(){fetch('/wp-json/booker67/v1/human_ressources_inactif',{// Ajustez l'URL en fonction de votre API\nheaders:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){setInactiveUsers(data);//setLoading(false); plus de loader pour le moment\n}).catch(function(error){return console.error('Error fetching inactive users:',error);});},[]);var handleDragEnd=function handleDragEnd(result){var source=result.source,destination=result.destination;// Vérifiez si l'élément a été déposé en dehors d'une liste valide\nif(!destination){return;}// Vérifiez si l'élément a été déplacé à la même position dans la même liste\nif(source.droppableId===destination.droppableId&&source.index===destination.index){return;}// TODO: Mettez à jour les états pour refléter le déplacement\nif(source.droppableId===\"active\"&&destination.droppableId===\"inactive\"){var movedUser=activeUsers[source.index];setActiveUsers(function(prev){return prev.filter(function(_,index){return index!==source.index;});});setInactiveUsers(function(prev){return[].concat(_toConsumableArray(prev),[movedUser]);});}else if(source.droppableId===\"inactive\"&&destination.droppableId===\"active\"){var _movedUser=inactiveUsers[source.index];setInactiveUsers(function(prev){return prev.filter(function(_,index){return index!==source.index;});});setActiveUsers(function(prev){return[].concat(_toConsumableArray(prev),[_movedUser]);});}if(result.destination.droppableId===\"active\"){updateUserStatus(result.draggableId,1);}else if(result.destination.droppableId===\"inactive\"){updateUserStatus(result.draggableId,0);}};function updateUserStatus(userId,status){fetch('/wp-json/booker67/v1/update_human_ressources_status',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:userId,status:status})}).then(function(response){return response.json();}).then(function(data){if(data.status!==\"success\"){console.error(\"Failed to update user status\");}else{console.log(' donnée personnel mise a jour');}}).catch(function(error){console.error(\"Error:\",error);});}return/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:handleDragEnd,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',padding:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,marginRight:'10px'},children:/*#__PURE__*/_jsx(ActiveHumans,{users:activeUsers,setUsers:setActiveUsers})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,marginLeft:'10px'},children:/*#__PURE__*/_jsx(InactiveHumans,{users:inactiveUsers,setUsers:setInactiveUsers})})]})});}export default HumanList;","map":{"version":3,"names":["React","useState","useEffect","DragDropContext","ActiveHumans","InactiveHumans","jsx","_jsx","jsxs","_jsxs","HumanList","_useState","_useState2","_slicedToArray","inactiveUsers","setInactiveUsers","_useState3","_useState4","activeUsers","setActiveUsers","fetch","headers","then","response","json","data","catch","error","console","handleDragEnd","result","source","destination","droppableId","index","movedUser","prev","filter","_","concat","_toConsumableArray","updateUserStatus","draggableId","userId","status","method","body","JSON","stringify","id","log","onDragEnd","children","style","display","justifyContent","padding","flex","marginRight","users","setUsers","marginLeft"],"sources":["C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/src/components/humanList.js"],"sourcesContent":["\r\n/*\r\ncomposant affichant la liste du personnel actif ainsi que les inactifs\r\n */\r\nimport React, {useState,useEffect} from 'react';\r\nimport { DragDropContext } from 'react-beautiful-dnd';\r\nimport ActiveHumans from './activeHumans';\r\nimport InactiveHumans from './InactiveHumans';\r\n\r\nfunction HumanList() {\r\n\r\n    const [inactiveUsers, setInactiveUsers] = useState([]);\r\n    const [activeUsers, setActiveUsers] = useState([]);\r\n\r\n    useEffect(() => {\r\n        fetch('/wp-json/booker67/v1/human_ressources_actif', {  // Ajustez l'URL en fonction de votre API\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setActiveUsers(data);\r\n               // setLoading(false); plus de loader pour le moment\r\n            })\r\n            .catch(error => console.error('Error fetching active users:', error));\r\n    }, []);\r\n    useEffect(() => {\r\n        fetch('/wp-json/booker67/v1/human_ressources_inactif', {  // Ajustez l'URL en fonction de votre API\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setInactiveUsers(data);\r\n                //setLoading(false); plus de loader pour le moment\r\n            })\r\n            .catch(error => console.error('Error fetching inactive users:', error));\r\n    }, []);\r\n    const handleDragEnd = (result) => {\r\n        const { source, destination } = result;\r\n\r\n        // Vérifiez si l'élément a été déposé en dehors d'une liste valide\r\n        if (!destination) {\r\n            return;\r\n        }\r\n\r\n        // Vérifiez si l'élément a été déplacé à la même position dans la même liste\r\n        if (\r\n            source.droppableId === destination.droppableId &&\r\n            source.index === destination.index\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        // TODO: Mettez à jour les états pour refléter le déplacement\r\n\r\n        if (source.droppableId === \"active\" && destination.droppableId === \"inactive\") {\r\n            const movedUser = activeUsers[source.index];\r\n            setActiveUsers(prev => prev.filter((_, index) => index !== source.index));\r\n            setInactiveUsers(prev => [...prev, movedUser]);\r\n        } else if (source.droppableId === \"inactive\" && destination.droppableId === \"active\") {\r\n            const movedUser = inactiveUsers[source.index];\r\n            setInactiveUsers(prev => prev.filter((_, index) => index !== source.index));\r\n            setActiveUsers(prev => [...prev, movedUser]);\r\n        }\r\n\r\n        if (result.destination.droppableId === \"active\") {\r\n            updateUserStatus(result.draggableId, 1);\r\n        } else if (result.destination.droppableId === \"inactive\") {\r\n            updateUserStatus(result.draggableId, 0);\r\n        }\r\n    };\r\n    function updateUserStatus(userId, status) {\r\n        fetch('/wp-json/booker67/v1/update_human_ressources_status', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                id: userId,\r\n                status: status\r\n            }),\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.status !== \"success\") {\r\n                    console.error(\"Failed to update user status\");\r\n                }\r\n                else { console.log(' donnée personnel mise a jour')}\r\n            })\r\n            .catch(error => {\r\n                console.error(\"Error:\", error);\r\n            });\r\n    }\r\n\r\n    return (\r\n        <DragDropContext onDragEnd={handleDragEnd}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', padding: '10px' }}>\r\n                <div style={{ flex: 1, marginRight: '10px' }}>\r\n                    <ActiveHumans users={activeUsers} setUsers={setActiveUsers} />\r\n                </div>\r\n                <div style={{ flex: 1, marginLeft: '10px' }}>\r\n                    <InactiveHumans users={inactiveUsers} setUsers={setInactiveUsers} />\r\n                </div>\r\n            </div>\r\n        </DragDropContext>\r\n    );\r\n}\r\n\r\nexport default HumanList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}