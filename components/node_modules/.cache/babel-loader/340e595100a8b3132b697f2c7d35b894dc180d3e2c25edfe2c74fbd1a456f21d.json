{"ast":null,"code":"import _slicedToArray from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./css/appointment.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faUsers,faHandsHelping,faHourglassHalf,faCheckCircle,faBan,faCalendarTimes,faCheckDouble,faMoneyBillWave}from'@fortawesome/free-solid-svg-icons';import{useFetch}from\"../hooks/useFetch\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function booking67_getStatusIcon(status){var numericStatus=Number(status);switch(parseInt(numericStatus)){case 1:return faHourglassHalf;case 2:return faCheckCircle;case 0:return faBan;case 3:return faCalendarTimes;case 4:return faCheckDouble;case 6:return faMoneyBillWave;default:return faMoneyBillWave;}}function booking67_getStatusColor(status){var iconClass='waiting';switch(parseInt(status)){case 1:iconClass='waiting';break;case 2:iconClass='confirmed';break;case 0:iconClass='cancelled';break;case 3:iconClass='postponed';break;case 4:iconClass='completed';break;case 6:iconClass='paid';break;}return iconClass;}function Booking67_Appointment(_ref){var rdv=_ref.rdv,options=_ref.options,practicianInfo=_ref.practicianInfo,prestationInfo=_ref.prestationInfo;var _useState=useState({show:false,url:'<div>Erreur de contenu de la fenêtre</div>'}),_useState2=_slicedToArray(_useState,2),modalInfo=_useState2[0],setModalInfo=_useState2[1];var statusIcon=booking67_getStatusIcon(rdv.rdv_status);var iconClass=booking67_getStatusColor(rdv.rdv_status);var url='';function booking67_handleIconClick(divType,id){var url=booking67_generateModalContent(divType,id);if(url!=''){console.log('url handleclik',url);setModalInfo({show:true,url:url});}else{// Gérer le cas où content est undefined ou non valide\nconsole.log(\"Contenu non trouvé pour le type :\",divType);}}function booking67_generateModalContent(divType,id){console.log('id:',id);switch(divType){case'practician':url='/wp-json/booking67/v1/human-ressource/'+id;break;case'prestation':url='/wp-json/booking67/v1/prestation/'+id;break;default:return\"format url impossible\";}console.log('url function: ',url);return url;}booking67_getStatusColor(rdv.rdv_status);booking67_getStatusIcon(rdv.rdv_status);return/*#__PURE__*/_jsxs(\"div\",{className:\"appointment-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"appointment-date\",children:new Date(rdv.rdv_dateTime).toLocaleDateString()}),/*#__PURE__*/_jsx(\"div\",{className:\"appointment-time\",children:new Date(rdv.rdv_dateTime).toLocaleTimeString()}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-name\",children:[rdv.user_firstName,\" \",rdv.user_lastName]}),/*#__PURE__*/_jsx(\"div\",{className:\"user-phone\",children:rdv.user_phone}),/*#__PURE__*/_jsx(\"div\",{className:\"user-mail\",children:rdv.user_mail}),options.multiplePracticians&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"practician-name\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faUsers,onClick:function onClick(){return booking67_handleIconClick('practician',rdv.practician_id);}})})}),options.multiPrestations&&/*#__PURE__*/_jsx(\"div\",{className:\"prestation-name\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faHandsHelping,onClick:function onClick(){return booking67_handleIconClick('prestation',rdv.prestation_id);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"appointment-status\",children:statusIcon&&/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:statusIcon,className:iconClass,onClick:function onClick(){return booking67_handleIconClick('Contenu pour la modale');}})}),modalInfo.show&&/*#__PURE__*/_jsx(Modal,{onClose:function onClose(){return setModalInfo({show:false,url:url});},children:modalInfo.url})]});}// Définition du composant Modal\nfunction Modal(_ref2){var onClose=_ref2.onClose,url=_ref2.url;var content;console.log('url modal: ',url);if(url){// useFetch est appelé seulement si l'URL est définie\nvar _useFetch=useFetch(url,[]),loading=_useFetch.loading,data=_useFetch.data,errors=_useFetch.errors;console.log('data modal fetched',data);content=/*#__PURE__*/_jsx(\"div\",{children:data});}else{// Gestion du cas où l'URL n'est pas définie\ncontent=/*#__PURE__*/_jsx(\"div\",{children:\"URL non d\\xE9finie\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,children:\"Fermer\"}),content]});}export default Booking67_Appointment;","map":{"version":3,"names":["React","useEffect","useState","FontAwesomeIcon","faUsers","faHandsHelping","faHourglassHalf","faCheckCircle","faBan","faCalendarTimes","faCheckDouble","faMoneyBillWave","useFetch","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","booking67_getStatusIcon","status","numericStatus","Number","parseInt","booking67_getStatusColor","iconClass","Booking67_Appointment","_ref","rdv","options","practicianInfo","prestationInfo","_useState","show","url","_useState2","_slicedToArray","modalInfo","setModalInfo","statusIcon","rdv_status","booking67_handleIconClick","divType","id","booking67_generateModalContent","console","log","className","children","Date","rdv_dateTime","toLocaleDateString","toLocaleTimeString","user_firstName","user_lastName","user_phone","user_mail","multiplePracticians","icon","onClick","practician_id","multiPrestations","prestation_id","Modal","onClose","_ref2","content","_useFetch","loading","data","errors"],"sources":["C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/src/components/Booking67_Appointment.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport './css/appointment.css'\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport {\r\n    faUsers,\r\n    faHandsHelping,\r\n    faHourglassHalf,\r\n    faCheckCircle,\r\n    faBan,\r\n    faCalendarTimes,\r\n    faCheckDouble,\r\n    faMoneyBillWave\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport {useFetch} from \"../hooks/useFetch\";\r\n\r\n\r\nfunction booking67_getStatusIcon(status) {\r\n    const numericStatus = Number(status);\r\n    switch (parseInt(numericStatus)) {\r\n        case 1:\r\n            return faHourglassHalf;\r\n        case 2:\r\n            return faCheckCircle;\r\n        case 0:\r\n            return faBan;\r\n        case 3:\r\n            return faCalendarTimes;\r\n        case 4:\r\n            return faCheckDouble;\r\n        case 6:\r\n            return faMoneyBillWave;\r\n        default:\r\n            return faMoneyBillWave;\r\n    }\r\n}\r\n\r\nfunction booking67_getStatusColor(status) {\r\n    let iconClass = 'waiting';\r\n    switch (parseInt(status)) {\r\n        case 1:\r\n            iconClass = 'waiting';\r\n            break;\r\n        case 2:\r\n            iconClass = 'confirmed';\r\n            break;\r\n        case 0:\r\n            iconClass = 'cancelled';\r\n            break;\r\n        case 3:\r\n            iconClass = 'postponed';\r\n            break;\r\n        case 4:\r\n            iconClass = 'completed';\r\n            break;\r\n        case 6:\r\n            iconClass = 'paid';\r\n            break;\r\n\r\n    }\r\n    return iconClass\r\n}\r\n\r\n\r\n\r\nfunction Booking67_Appointment({rdv, options, practicianInfo, prestationInfo}) {\r\n    const [modalInfo, setModalInfo] = useState({show: false, url: '<div>Erreur de contenu de la fenêtre</div>'});\r\n    const statusIcon = booking67_getStatusIcon(rdv.rdv_status);\r\n    const iconClass = booking67_getStatusColor(rdv.rdv_status);\r\n    let url= '';\r\n    function booking67_handleIconClick(divType,id) {\r\n\r\n        let url=booking67_generateModalContent(divType,id)\r\n        if (url!='') {\r\n            console.log('url handleclik', url)\r\n            setModalInfo({show: true, url});\r\n        } else {\r\n            // Gérer le cas où content est undefined ou non valide\r\n            console.log(\"Contenu non trouvé pour le type :\", divType);\r\n        }\r\n\r\n    }\r\n    function booking67_generateModalContent(divType, id) {\r\n\r\nconsole.log('id:',id)\r\n        switch (divType) {\r\n\r\n            case 'practician':\r\n                url = '/wp-json/booking67/v1/human-ressource/' + id;\r\n                break;\r\n            case 'prestation':\r\n                url= '/wp-json/booking67/v1/prestation/' + id;\r\n                break;\r\n            default:\r\n                return \"format url impossible\";\r\n        }\r\n        console.log('url function: ', url);\r\n        return url\r\n    }\r\n\r\n\r\n\r\n    booking67_getStatusColor(rdv.rdv_status)\r\n    booking67_getStatusIcon(rdv.rdv_status)\r\n    return (\r\n        <div className=\"appointment-row\">\r\n            <div className=\"appointment-date\">{new Date(rdv.rdv_dateTime).toLocaleDateString()}</div>\r\n            <div className=\"appointment-time\">{new Date(rdv.rdv_dateTime).toLocaleTimeString()}</div>\r\n            <div className=\"user-name\">{rdv.user_firstName} {rdv.user_lastName}</div>\r\n            <div className=\"user-phone\">{rdv.user_phone}</div>\r\n            <div className=\"user-mail\">{rdv.user_mail}</div>\r\n\r\n            {options.multiplePracticians && (\r\n                <>\r\n                    <div className=\"practician-name\">\r\n                        <FontAwesomeIcon icon={faUsers}\r\n                                         onClick={() => booking67_handleIconClick('practician',rdv.practician_id)}/>\r\n                    </div>\r\n\r\n                </>\r\n            )}\r\n\r\n            {options.multiPrestations && (\r\n                <div className=\"prestation-name\">\r\n                    <FontAwesomeIcon icon={faHandsHelping}\r\n                                     onClick={() => booking67_handleIconClick('prestation',rdv.prestation_id)}/>\r\n                </div>\r\n            )}\r\n            <div className=\"appointment-status\">\r\n\r\n                {statusIcon && <FontAwesomeIcon icon={statusIcon} className={iconClass}\r\n                                                onClick={() => booking67_handleIconClick('Contenu pour la modale')}/>}\r\n            </div>\r\n            {modalInfo.show && (\r\n                <Modal\r\n                    onClose={() => setModalInfo({show: false, url:url})}>\r\n                    {modalInfo.url}\r\n                </Modal>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n// Définition du composant Modal\r\nfunction Modal({ onClose, url }) {\r\n    let content;\r\n    console.log('url modal: ' , url)\r\n\r\n\r\n    if (url) {\r\n        // useFetch est appelé seulement si l'URL est définie\r\n        const { loading, data, errors } = useFetch(url, []);\r\n        console.log('data modal fetched' ,data)\r\n        content = (\r\n            <div>\r\n                {/* Votre contenu ici, basé sur loading, data et errors */}\r\n                {data}\r\n            </div>\r\n        );\r\n    } else {\r\n        // Gestion du cas où l'URL n'est pas définie\r\n        content = <div>URL non définie</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"modal\">\r\n            <button onClick={onClose}>Fermer</button>\r\n            {content}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Booking67_Appointment;"],"mappings":"wLAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAChD,MAAO,uBAAuB,CAC9B,OAAQC,eAAe,KAAO,gCAAgC,CAC9D,OACIC,OAAO,CACPC,cAAc,CACdC,eAAe,CACfC,aAAa,CACbC,KAAK,CACLC,eAAe,CACfC,aAAa,CACbC,eAAe,KACZ,mCAAmC,CAC1C,OAAQC,QAAQ,KAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAG3C,QAAS,CAAAC,uBAAuBA,CAACC,MAAM,CAAE,CACrC,GAAM,CAAAC,aAAa,CAAGC,MAAM,CAACF,MAAM,CAAC,CACpC,OAAQG,QAAQ,CAACF,aAAa,CAAC,EAC3B,IAAK,EAAC,CACF,MAAO,CAAAf,eAAe,CAC1B,IAAK,EAAC,CACF,MAAO,CAAAC,aAAa,CACxB,IAAK,EAAC,CACF,MAAO,CAAAC,KAAK,CAChB,IAAK,EAAC,CACF,MAAO,CAAAC,eAAe,CAC1B,IAAK,EAAC,CACF,MAAO,CAAAC,aAAa,CACxB,IAAK,EAAC,CACF,MAAO,CAAAC,eAAe,CAC1B,QACI,MAAO,CAAAA,eAAe,CAC9B,CACJ,CAEA,QAAS,CAAAa,wBAAwBA,CAACJ,MAAM,CAAE,CACtC,GAAI,CAAAK,SAAS,CAAG,SAAS,CACzB,OAAQF,QAAQ,CAACH,MAAM,CAAC,EACpB,IAAK,EAAC,CACFK,SAAS,CAAG,SAAS,CACrB,MACJ,IAAK,EAAC,CACFA,SAAS,CAAG,WAAW,CACvB,MACJ,IAAK,EAAC,CACFA,SAAS,CAAG,WAAW,CACvB,MACJ,IAAK,EAAC,CACFA,SAAS,CAAG,WAAW,CACvB,MACJ,IAAK,EAAC,CACFA,SAAS,CAAG,WAAW,CACvB,MACJ,IAAK,EAAC,CACFA,SAAS,CAAG,MAAM,CAClB,MAER,CACA,MAAO,CAAAA,SAAS,CACpB,CAIA,QAAS,CAAAC,qBAAqBA,CAAAC,IAAA,CAAiD,IAA/C,CAAAC,GAAG,CAAAD,IAAA,CAAHC,GAAG,CAAEC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CAAEC,cAAc,CAAAH,IAAA,CAAdG,cAAc,CAAEC,cAAc,CAAAJ,IAAA,CAAdI,cAAc,CACxE,IAAAC,SAAA,CAAkC9B,QAAQ,CAAC,CAAC+B,IAAI,CAAE,KAAK,CAAEC,GAAG,CAAE,4CAA4C,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAJ,SAAA,IAArGK,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,GAAM,CAAAI,UAAU,CAAGpB,uBAAuB,CAACS,GAAG,CAACY,UAAU,CAAC,CAC1D,GAAM,CAAAf,SAAS,CAAGD,wBAAwB,CAACI,GAAG,CAACY,UAAU,CAAC,CAC1D,GAAI,CAAAN,GAAG,CAAE,EAAE,CACX,QAAS,CAAAO,yBAAyBA,CAACC,OAAO,CAACC,EAAE,CAAE,CAE3C,GAAI,CAAAT,GAAG,CAACU,8BAA8B,CAACF,OAAO,CAACC,EAAE,CAAC,CAClD,GAAIT,GAAG,EAAE,EAAE,CAAE,CACTW,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEZ,GAAG,CAAC,CAClCI,YAAY,CAAC,CAACL,IAAI,CAAE,IAAI,CAAEC,GAAG,CAAHA,GAAG,CAAC,CAAC,CACnC,CAAC,IAAM,CACH;AACAW,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAEJ,OAAO,CAAC,CAC7D,CAEJ,CACA,QAAS,CAAAE,8BAA8BA,CAACF,OAAO,CAAEC,EAAE,CAAE,CAEzDE,OAAO,CAACC,GAAG,CAAC,KAAK,CAACH,EAAE,CAAC,CACb,OAAQD,OAAO,EAEX,IAAK,YAAY,CACbR,GAAG,CAAG,wCAAwC,CAAGS,EAAE,CACnD,MACJ,IAAK,YAAY,CACbT,GAAG,CAAE,mCAAmC,CAAGS,EAAE,CAC7C,MACJ,QACI,MAAO,uBAAuB,CACtC,CACAE,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEZ,GAAG,CAAC,CAClC,MAAO,CAAAA,GAAG,CACd,CAIAV,wBAAwB,CAACI,GAAG,CAACY,UAAU,CAAC,CACxCrB,uBAAuB,CAACS,GAAG,CAACY,UAAU,CAAC,CACvC,mBACIxB,KAAA,QAAK+B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC5BlC,IAAA,QAAKiC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAE,GAAI,CAAAC,IAAI,CAACrB,GAAG,CAACsB,YAAY,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAM,CAAC,cACzFrC,IAAA,QAAKiC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAE,GAAI,CAAAC,IAAI,CAACrB,GAAG,CAACsB,YAAY,CAAC,CAACE,kBAAkB,CAAC,CAAC,CAAM,CAAC,cACzFpC,KAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAC,QAAA,EAAEpB,GAAG,CAACyB,cAAc,CAAC,GAAC,CAACzB,GAAG,CAAC0B,aAAa,EAAM,CAAC,cACzExC,IAAA,QAAKiC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEpB,GAAG,CAAC2B,UAAU,CAAM,CAAC,cAClDzC,IAAA,QAAKiC,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEpB,GAAG,CAAC4B,SAAS,CAAM,CAAC,CAE/C3B,OAAO,CAAC4B,mBAAmB,eACxB3C,IAAA,CAAAI,SAAA,EAAA8B,QAAA,cACIlC,IAAA,QAAKiC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC5BlC,IAAA,CAACX,eAAe,EAACuD,IAAI,CAAEtD,OAAQ,CACduD,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAlB,yBAAyB,CAAC,YAAY,CAACb,GAAG,CAACgC,aAAa,CAAC,EAAC,CAAC,CAAC,CAC3F,CAAC,CAER,CACL,CAEA/B,OAAO,CAACgC,gBAAgB,eACrB/C,IAAA,QAAKiC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC5BlC,IAAA,CAACX,eAAe,EAACuD,IAAI,CAAErD,cAAe,CACrBsD,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAlB,yBAAyB,CAAC,YAAY,CAACb,GAAG,CAACkC,aAAa,CAAC,EAAC,CAAC,CAAC,CAC3F,CACR,cACDhD,IAAA,QAAKiC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAE9BT,UAAU,eAAIzB,IAAA,CAACX,eAAe,EAACuD,IAAI,CAAEnB,UAAW,CAACQ,SAAS,CAAEtB,SAAU,CACvCkC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAlB,yBAAyB,CAAC,wBAAwB,CAAC,EAAC,CAAC,CAAC,CACpG,CAAC,CACLJ,SAAS,CAACJ,IAAI,eACXnB,IAAA,CAACiD,KAAK,EACFC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA1B,YAAY,CAAC,CAACL,IAAI,CAAE,KAAK,CAAEC,GAAG,CAACA,GAAG,CAAC,CAAC,EAAC,CAAAc,QAAA,CACnDX,SAAS,CAACH,GAAG,CACX,CACV,EACA,CAAC,CAEd,CAEA;AACA,QAAS,CAAA6B,KAAKA,CAAAE,KAAA,CAAmB,IAAhB,CAAAD,OAAO,CAAAC,KAAA,CAAPD,OAAO,CAAE9B,GAAG,CAAA+B,KAAA,CAAH/B,GAAG,CACzB,GAAI,CAAAgC,OAAO,CACXrB,OAAO,CAACC,GAAG,CAAC,aAAa,CAAGZ,GAAG,CAAC,CAGhC,GAAIA,GAAG,CAAE,CACL;AACA,IAAAiC,SAAA,CAAkCvD,QAAQ,CAACsB,GAAG,CAAE,EAAE,CAAC,CAA3CkC,OAAO,CAAAD,SAAA,CAAPC,OAAO,CAAEC,IAAI,CAAAF,SAAA,CAAJE,IAAI,CAAEC,MAAM,CAAAH,SAAA,CAANG,MAAM,CAC7BzB,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEuB,IAAI,CAAC,CACvCH,OAAO,cACHpD,IAAA,QAAAkC,QAAA,CAEKqB,IAAI,CACJ,CACR,CACL,CAAC,IAAM,CACH;AACAH,OAAO,cAAGpD,IAAA,QAAAkC,QAAA,CAAK,oBAAe,CAAK,CAAC,CACxC,CAEA,mBACIhC,KAAA,QAAK+B,SAAS,CAAC,OAAO,CAAAC,QAAA,eAClBlC,IAAA,WAAQ6C,OAAO,CAAEK,OAAQ,CAAAhB,QAAA,CAAC,QAAM,CAAQ,CAAC,CACxCkB,OAAO,EACP,CAAC,CAEd,CAEA,cAAe,CAAAxC,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}