{"ast":null,"code":"import _toConsumableArray from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// ImageUploader.js\nimport React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageUploader=function ImageUploader(_ref){var onImageSelect=_ref.onImageSelect;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),images=_useState2[0],setImages=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),uploading=_useState4[0],setUploading=_useState4[1];useEffect(function(){// Chargez la liste des images déjà présentes sur le serveur\nfetchImages();},[]);var fetchImages=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,imageData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/api/images');case 2:response=_context.sent;_context.next=5;return response.json();case 5:imageData=_context.sent;setImages(imageData);case 7:case\"end\":return _context.stop();}},_callee);}));return function fetchImages(){return _ref2.apply(this,arguments);};}();var handleFileUpload=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var file,formData,response,uploadedImage;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:file=e.target.files[0];if(!file){_context2.next=17;break;}setUploading(true);formData=new FormData();formData.append('image',file);// Remplacez '/api/upload' par l'endpoint d'upload de votre serveur\n_context2.next=7;return fetch('/api/upload',{method:'POST',body:formData});case 7:response=_context2.sent;if(!response.ok){_context2.next=16;break;}_context2.next=11;return response.json();case 11:uploadedImage=_context2.sent;setImages([].concat(_toConsumableArray(images),[uploadedImage]));onImageSelect(uploadedImage);_context2.next=16;break;case 16:setUploading(false);case 17:case\"end\":return _context2.stop();}},_callee2);}));return function handleFileUpload(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[uploading?/*#__PURE__*/_jsx(\"p\",{children:\"Chargement...\"}):null,/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileUpload}),/*#__PURE__*/_jsx(\"div\",{children:images.map(function(image){return/*#__PURE__*/_jsx(\"img\",{src:image.url,alt:image.alt,onClick:function onClick(){return onImageSelect(image);},style:{cursor:'pointer',maxWidth:'100px',margin:'5px'}},image.filename);})})]});};export default ImageUploader;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ImageUploader","_ref","onImageSelect","_useState","_useState2","_slicedToArray","images","setImages","_useState3","_useState4","uploading","setUploading","fetchImages","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","imageData","wrap","_callee$","_context","prev","next","fetch","sent","json","stop","apply","arguments","handleFileUpload","_ref3","_callee2","e","file","formData","uploadedImage","_callee2$","_context2","target","files","FormData","append","method","body","ok","concat","_toConsumableArray","_x","children","type","onChange","map","image","src","url","alt","onClick","style","cursor","maxWidth","margin","filename"],"sources":["C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/src/components/ImageUploader.js"],"sourcesContent":["// ImageUploader.js\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nconst ImageUploader = ({ onImageSelect }) => {\r\n    const [images, setImages] = useState([]);\r\n    const [uploading, setUploading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // Chargez la liste des images déjà présentes sur le serveur\r\n        fetchImages();\r\n    }, []);\r\n\r\n    const fetchImages = async () => {\r\n        // Remplacez '/api/images' par l'endpoint de votre serveur\r\n        const response = await fetch('/api/images');\r\n        const imageData = await response.json();\r\n        setImages(imageData);\r\n    };\r\n\r\n    const handleFileUpload = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setUploading(true);\r\n            const formData = new FormData();\r\n            formData.append('image', file);\r\n\r\n            // Remplacez '/api/upload' par l'endpoint d'upload de votre serveur\r\n            const response = await fetch('/api/upload', {\r\n                method: 'POST',\r\n                body: formData,\r\n            });\r\n\r\n            if (response.ok) {\r\n                const uploadedImage = await response.json();\r\n                setImages([...images, uploadedImage]);\r\n                onImageSelect(uploadedImage);\r\n            } else {\r\n                // Gérez les erreurs d'upload ici\r\n            }\r\n            setUploading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {uploading ? <p>Chargement...</p> : null}\r\n            <input type=\"file\" onChange={handleFileUpload} />\r\n            <div>\r\n                {images.map((image) => (\r\n                    <img\r\n                        key={image.filename}\r\n                        src={image.url}\r\n                        alt={image.alt}\r\n                        onClick={() => onImageSelect(image)}\r\n                        style={{ cursor: 'pointer', maxWidth: '100px', margin: '5px' }}\r\n                    />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ImageUploader;\r\n"],"mappings":"wvBAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEnD,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAAC,IAAA,CAA0B,IAApB,CAAAC,aAAa,CAAAD,IAAA,CAAbC,aAAa,CAClC,IAAAC,SAAA,CAA4BT,QAAQ,CAAC,EAAE,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,IAAAI,UAAA,CAAkCd,QAAQ,CAAC,KAAK,CAAC,CAAAe,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA1CE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAE9Bd,SAAS,CAAC,UAAM,CACZ;AACAiB,WAAW,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAA,WAAW,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,SAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SAEO,CAAAC,KAAK,CAAC,aAAa,CAAC,QAArCP,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CAAAJ,QAAA,CAAAE,IAAA,SACU,CAAAN,QAAQ,CAACS,IAAI,CAAC,CAAC,QAAjCR,SAAS,CAAAG,QAAA,CAAAI,IAAA,CACfnB,SAAS,CAACY,SAAS,CAAC,CAAC,wBAAAG,QAAA,CAAAM,IAAA,MAAAX,OAAA,GACxB,kBALK,CAAAL,WAAWA,CAAA,SAAAC,KAAA,CAAAgB,KAAA,MAAAC,SAAA,OAKhB,CAED,GAAM,CAAAC,gBAAgB,6BAAAC,KAAA,CAAAlB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAiB,SAAOC,CAAC,MAAAC,IAAA,CAAAC,QAAA,CAAAlB,QAAA,CAAAmB,aAAA,QAAAtB,mBAAA,GAAAK,IAAA,UAAAkB,UAAAC,SAAA,iBAAAA,SAAA,CAAAhB,IAAA,CAAAgB,SAAA,CAAAf,IAAA,SACvBW,IAAI,CAAGD,CAAC,CAACM,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,KAC1BN,IAAI,EAAAI,SAAA,CAAAf,IAAA,WACJb,YAAY,CAAC,IAAI,CAAC,CACZyB,QAAQ,CAAG,GAAI,CAAAM,QAAQ,CAAC,CAAC,CAC/BN,QAAQ,CAACO,MAAM,CAAC,OAAO,CAAER,IAAI,CAAC,CAE9B;AAAAI,SAAA,CAAAf,IAAA,SACuB,CAAAC,KAAK,CAAC,aAAa,CAAE,CACxCmB,MAAM,CAAE,MAAM,CACdC,IAAI,CAAET,QACV,CAAC,CAAC,QAHIlB,QAAQ,CAAAqB,SAAA,CAAAb,IAAA,KAKVR,QAAQ,CAAC4B,EAAE,EAAAP,SAAA,CAAAf,IAAA,WAAAe,SAAA,CAAAf,IAAA,UACiB,CAAAN,QAAQ,CAACS,IAAI,CAAC,CAAC,SAArCU,aAAa,CAAAE,SAAA,CAAAb,IAAA,CACnBnB,SAAS,IAAAwC,MAAA,CAAAC,kBAAA,CAAK1C,MAAM,GAAE+B,aAAa,EAAC,CAAC,CACrCnC,aAAa,CAACmC,aAAa,CAAC,CAACE,SAAA,CAAAf,IAAA,kBAIjCb,YAAY,CAAC,KAAK,CAAC,CAAC,yBAAA4B,SAAA,CAAAX,IAAA,MAAAK,QAAA,GAE3B,kBAtBK,CAAAF,gBAAgBA,CAAAkB,EAAA,SAAAjB,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAsBrB,CAED,mBACI/B,KAAA,QAAAmD,QAAA,EACKxC,SAAS,cAAGb,IAAA,MAAAqD,QAAA,CAAG,eAAa,CAAG,CAAC,CAAG,IAAI,cACxCrD,IAAA,UAAOsD,IAAI,CAAC,MAAM,CAACC,QAAQ,CAAErB,gBAAiB,CAAE,CAAC,cACjDlC,IAAA,QAAAqD,QAAA,CACK5C,MAAM,CAAC+C,GAAG,CAAC,SAACC,KAAK,qBACdzD,IAAA,QAEI0D,GAAG,CAAED,KAAK,CAACE,GAAI,CACfC,GAAG,CAAEH,KAAK,CAACG,GAAI,CACfC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAxD,aAAa,CAACoD,KAAK,CAAC,EAAC,CACpCK,KAAK,CAAE,CAAEC,MAAM,CAAE,SAAS,CAAEC,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,KAAM,CAAE,EAJ1DR,KAAK,CAACS,QAKd,CAAC,EACL,CAAC,CACD,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAA/D,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}