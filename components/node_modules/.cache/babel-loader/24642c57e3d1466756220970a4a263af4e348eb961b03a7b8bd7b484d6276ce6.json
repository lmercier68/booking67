{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import fetchOptions from\"./scripts/fetchOptions\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function OptionsComponent(){var _useState=useState({hasFixedTimeSlots:false,slotDuration:0,multipleAppointments:false,maxAppointments:0,multiplePracticians:false,multiPrestations:false,indicateNumberOfParticipants:false,allowObservations:false}),_useState2=_slicedToArray(_useState,2),options=_useState2[0],setOptions=_useState2[1];useEffect(function(){fetchOptions(['genType_hasFixedTimeSlots','genType_multipleAppointments','genType_slotDuration','genType_maxAppointments','genType_multiplePracticians','genType_multiPrestations','genType_indicateNumberOfParticipants','genType_allowObservations']).then(function(data){setOptions(transformFetchedOptions(data));});},[]);// Fonction pour transformer les données récupérées en format attendu\nvar transformFetchedOptions=function transformFetchedOptions(fetchedOptions){var newOptions=_objectSpread({},options);fetchedOptions.forEach(function(opt){var key=opt.generic_type.replace('genType_','');newOptions[key]=opt.value==='true'||opt.value==='false'?opt.value==='true':opt.value;});return newOptions;};var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value,type=_e$target.type,checked=_e$target.checked;setOptions(function(prevOptions){return _objectSpread(_objectSpread({},prevOptions),{},_defineProperty({},name,type==='checkbox'?checked:value));});};// Génération des options pour les durées de créneau\nvar slotDurationOptions=[];for(var i=15;i<=180;i+=15){slotDurationOptions.push(/*#__PURE__*/_jsxs(\"option\",{value:i,children:[i,\" minutes\"]},i));}var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,responseData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/wp-json/booker67/v1/multiOptions',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(options)});case 3:response=_context.sent;if(response.ok){_context.next=6;break;}throw new Error('Erreur lors de l\\'envoi des données');case 6:_context.next=8;return response.json();case 8:responseData=_context.sent;console.log('Succès:',responseData);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.error('Erreur:',_context.t0);case 15:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Les rendez-vous ont-ils une heure de d\\xE9but et une heure de fin ?\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"hasFixedTimeSlots\",checked:options.hasFixedTimeSlots,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"br\",{}),options.hasFixedTimeSlots&&/*#__PURE__*/_jsxs(\"label\",{children:[\"Dur\\xE9e des cr\\xE9neaux\",/*#__PURE__*/_jsx(\"select\",{name:\"slotDuration\",value:options.slotDuration,onChange:handleChange,children:slotDurationOptions})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Plusieurs rendez-vous peuvent-il \\xEAtre pris simultan\\xE9ment ?\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"multipleAppointments\",checked:options.multipleAppointments,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"br\",{}),options.multipleAppointments&&/*#__PURE__*/_jsxs(\"label\",{children:[\"Nombre de rendez-vous simultan\\xE9s maximum\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"maxAppointments\",value:options.maxAppointments,onChange:handleChange,min:\"0\"}),\" (0 = illimit\\xE9s)\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Intervenant multiples :\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"multiplePracticians\",checked:options.multiplePracticians,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Prestations multiples:\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"multiPrestations\",checked:options.multiPrestations,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Le client peut/doit indiquer le nombre de participants :\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"indicateNumberOfParticipants\",checked:options.indicateNumberOfParticipants,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Le client peut laisser une observation :\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"allowObservations\",checked:options.allowObservations,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Enregistrer les Options\"})]});}export default OptionsComponent;","map":{"version":3,"names":["React","useState","useEffect","fetchOptions","jsxs","_jsxs","jsx","_jsx","OptionsComponent","_useState","hasFixedTimeSlots","slotDuration","multipleAppointments","maxAppointments","multiplePracticians","multiPrestations","indicateNumberOfParticipants","allowObservations","_useState2","_slicedToArray","options","setOptions","then","data","transformFetchedOptions","fetchedOptions","newOptions","_objectSpread","forEach","opt","key","generic_type","replace","value","handleChange","e","_e$target","target","name","type","checked","prevOptions","_defineProperty","slotDurationOptions","i","push","children","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","responseData","wrap","_callee$","_context","prev","next","fetch","method","headers","body","JSON","stringify","sent","ok","Error","json","console","log","t0","error","stop","apply","arguments","onChange","min","onClick"],"sources":["C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/src/components/OptionsComponent.js"],"sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport fetchOptions from \"./scripts/fetchOptions\";\r\nfunction OptionsComponent() {\r\n    const [options, setOptions] = useState({\r\n        hasFixedTimeSlots: false,\r\n        slotDuration: 0,\r\n        multipleAppointments: false,\r\n        maxAppointments: 0,\r\n        multiplePracticians: false,\r\n        multiPrestations: false,\r\n        indicateNumberOfParticipants: false,\r\n        allowObservations: false\r\n    });\r\n\r\n\r\n    useEffect(() => {\r\n        fetchOptions(['genType_hasFixedTimeSlots', 'genType_multipleAppointments','genType_slotDuration','genType_maxAppointments','genType_multiplePracticians','genType_multiPrestations','genType_indicateNumberOfParticipants','genType_allowObservations']).then(data => {\r\n\r\n            setOptions(transformFetchedOptions(data));\r\n        });\r\n\r\n    }, []);\r\n    // Fonction pour transformer les données récupérées en format attendu\r\n    const transformFetchedOptions = (fetchedOptions) => {\r\n        let newOptions = { ...options };\r\n        fetchedOptions.forEach(opt => {\r\n            const key = opt.generic_type.replace('genType_', '');\r\n            newOptions[key] = (opt.value === 'true' || opt.value === 'false') ? opt.value === 'true' : opt.value;\r\n        });\r\n        return newOptions;\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        setOptions(prevOptions => ({\r\n            ...prevOptions,\r\n            [name]: type === 'checkbox' ? checked : value\r\n        }));\r\n    };\r\n    // Génération des options pour les durées de créneau\r\n    const slotDurationOptions = [];\r\n    for (let i = 15; i <= 180; i += 15) {\r\n        slotDurationOptions.push(<option key={i} value={i}>{i} minutes</option>);\r\n    }\r\n    const handleSubmit = async () => {\r\n        try {\r\n            const response = await fetch('/wp-json/booker67/v1/multiOptions', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(options)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Erreur lors de l\\'envoi des données');\r\n            }\r\n\r\n            const responseData = await response.json();\r\n            console.log('Succès:', responseData);\r\n        } catch (error) {\r\n            console.error('Erreur:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n\r\n            <label>\r\n                Les rendez-vous ont-ils une heure de début et une heure de fin ?\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name=\"hasFixedTimeSlots\"\r\n                    checked={options.hasFixedTimeSlots}\r\n                    onChange={handleChange}\r\n                />\r\n            </label>\r\n            <br/>\r\n            {options.hasFixedTimeSlots && (\r\n                <label>\r\n                    Durée des créneaux\r\n                    <select\r\n                        name=\"slotDuration\"\r\n                        value={options.slotDuration}\r\n                        onChange={handleChange}\r\n                    >\r\n                        {slotDurationOptions}\r\n                    </select>\r\n                </label>\r\n\r\n            )}\r\n            <br/>\r\n            <label>\r\n                Plusieurs rendez-vous peuvent-il être pris simultanément ?\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name=\"multipleAppointments\"\r\n                    checked={options.multipleAppointments}\r\n                    onChange={handleChange}\r\n                />\r\n            </label>\r\n            <br/>\r\n            {options.multipleAppointments && (\r\n                <label>\r\n                    Nombre de rendez-vous simultanés maximum\r\n                    <input\r\n                        type=\"number\"\r\n                        name=\"maxAppointments\"\r\n                        value={options.maxAppointments}\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                    /> (0 = illimités)\r\n                </label>\r\n            )}\r\n            <br/>\r\n            <label>\r\n                Intervenant multiples :\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name=\"multiplePracticians\"\r\n                    checked={options.multiplePracticians}\r\n                    onChange={handleChange}\r\n                />\r\n            </label>\r\n            <br/>\r\n            <label>\r\n                Prestations multiples:\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name=\"multiPrestations\"\r\n                    checked={options.multiPrestations}\r\n                    onChange={handleChange}\r\n                />\r\n            </label>\r\n            <br/>\r\n            <label>\r\n                Le client peut/doit indiquer le nombre de participants :\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name=\"indicateNumberOfParticipants\"\r\n                    checked={options.indicateNumberOfParticipants}\r\n                    onChange={handleChange}\r\n                />\r\n            </label>\r\n            <br/>\r\n            <label>\r\n                Le client peut laisser une observation :\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name=\"allowObservations\"\r\n                    checked={options.allowObservations}\r\n                    onChange={handleChange}\r\n                />\r\n            </label>\r\n            {/* Autres champs... */}\r\n            <br/>\r\n            <button onClick={handleSubmit}>Enregistrer les Options</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OptionsComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}