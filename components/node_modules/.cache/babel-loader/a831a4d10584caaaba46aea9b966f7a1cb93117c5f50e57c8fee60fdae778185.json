{"ast":null,"code":"import _slicedToArray from\"C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import HumanRessourcesActifSelect from'./HumanActiflist';import GenericOptionsAdder from\"./GenericOptionsAdder\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PrestationForm(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),practicianId=_useState2[0],setPracticianId=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),prestationsList=_useState4[0],setPrestationsList=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),prestationCost=_useState6[0],setPrestationCost=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),prestationDuration=_useState8[0],setPrestationDuration=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),prestationName=_useState10[0],setPrestationName=_useState10[1];var handleHumanRessourceChange=function handleHumanRessourceChange(event){setPracticianId(event.target.value);};useEffect(function(){fetch('/wp-json/booker67/v1/options?generic_type=genType_prestation').then(function(response){return response.json();}).then(function(result){setPrestationsList(result);});},[]);var handleDrop=function handleDrop(event){event.preventDefault();var prestationId=event.dataTransfer.getData('text');var prestation=prestationsList.find(function(p){return p.id.toString()===prestationId;});if(prestation){setPrestationName(prestation.value);}};var handleDragOver=function handleDragOver(event){event.preventDefault();};var handlePrestationCostChange=function handlePrestationCostChange(event){setPrestationCost(event.target.value);};var handlePrestationDurationChange=function handlePrestationDurationChange(event){setPrestationDuration(event.target.value);};var handleSubmit=function handleSubmit(event){event.preventDefault();var data={practician_id:practicianId,prestation_name:prestationName,prestation_cost:prestationCost,prestation_duration:prestationDuration};fetch('/wp-json/booker67/v1/prestations',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(result){console.log(result);// Vous pouvez ajouter ici du code pour gérer le résultat de la requête\n}).catch(function(error){console.error('Error:',error);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(GenericOptionsAdder,{genericTypeProp:'prestation',maxAllowed:3}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Affectation de prestation\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{flex:1},children:[/*#__PURE__*/_jsx(HumanRessourcesActifSelect,{handleHumanRessourceChange:handleHumanRessourceChange}),/*#__PURE__*/_jsx(\"div\",{onDrop:handleDrop,onDragOver:handleDragOver,style:{border:'1px solid black',minHeight:'50px',marginBottom:'10px'},children:prestationName}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Co\\xFBt:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:prestationCost,onChange:function onChange(e){return setPrestationCost(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Dur\\xE9e:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:prestationDuration,onChange:function onChange(e){return setPrestationDuration(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sauvegarder\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,marginLeft:'10px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Liste des prestations\"}),/*#__PURE__*/_jsx(\"ul\",{children:prestationsList.map(function(prestation){return/*#__PURE__*/_jsx(\"li\",{draggable:\"true\",onDragStart:function onDragStart(event){return event.dataTransfer.setData('text',prestation.id.toString());},children:prestation.value},prestation.id);})})]})]})]});}export default PrestationForm;/*\r\n    };\r\n\r\n    return (<div>\r\n            <GenericOptionsAdder genericTypeProp={'prestation'} maxAllowed={3}/>\r\n            <hr/>\r\n            <p><h2>Affectation de prestation</h2></p>\r\n        <form onSubmit={handleSubmit}>\r\n            <HumanRessourcesActifSelect\r\n                handleHumanRessourceChange={handleHumanRessourceChange}\r\n            />\r\n            <div>\r\n                <label>\r\n                    Nom de la prestation:\r\n                    <input\r\n                        type=\"text\"\r\n                        value={prestationName}\r\n                        onChange={handlePrestationNameChange}\r\n                    />\r\n                </label>\r\n            </div>\r\n            <div>\r\n                <label>\r\n                    Coût de la prestation:\r\n                    <input\r\n                        type=\"number\"\r\n                        value={prestationCost}\r\n                        onChange={handlePrestationCostChange}\r\n                    />\r\n                </label>\r\n            </div>\r\n            <div>\r\n                <label>\r\n                    Durée de la prestation:\r\n                    <input\r\n                        type=\"time\"\r\n                        value={prestationDuration}\r\n                        onChange={handlePrestationDurationChange}\r\n                    />\r\n                </label>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">Enregistrer</button>\r\n            </div>\r\n        </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PrestationForm;*/","map":{"version":3,"names":["useState","useEffect","HumanRessourcesActifSelect","GenericOptionsAdder","jsx","_jsx","jsxs","_jsxs","PrestationForm","_useState","_useState2","_slicedToArray","practicianId","setPracticianId","_useState3","_useState4","prestationsList","setPrestationsList","_useState5","_useState6","prestationCost","setPrestationCost","_useState7","_useState8","prestationDuration","setPrestationDuration","_useState9","_useState10","prestationName","setPrestationName","handleHumanRessourceChange","event","target","value","fetch","then","response","json","result","handleDrop","preventDefault","prestationId","dataTransfer","getData","prestation","find","p","id","toString","handleDragOver","handlePrestationCostChange","handlePrestationDurationChange","handleSubmit","data","practician_id","prestation_name","prestation_cost","prestation_duration","method","headers","body","JSON","stringify","console","log","catch","error","children","genericTypeProp","maxAllowed","style","display","onSubmit","flex","onDrop","onDragOver","border","minHeight","marginBottom","type","onChange","e","marginLeft","map","draggable","onDragStart","setData"],"sources":["C:/Users/merci/Local Sites/wordpress-react-test/app/public/wp-content/plugins/booking67/components/src/components/PrestationForm.js"],"sourcesContent":["import { useState,useEffect  } from 'react';\r\nimport HumanRessourcesActifSelect from './HumanActiflist';\r\nimport GenericOptionsAdder from \"./GenericOptionsAdder\";\r\n\r\nfunction PrestationForm() {\r\n    const [practicianId, setPracticianId] = useState(0);\r\n    const [prestationsList, setPrestationsList] = useState([]);\r\n    const [prestationCost, setPrestationCost] = useState('');\r\n    const [prestationDuration, setPrestationDuration] = useState('');\r\n    const [prestationName, setPrestationName] = useState('');\r\n\r\n    const handleHumanRessourceChange = (event) => {\r\n        setPracticianId(event.target.value);\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetch('/wp-json/booker67/v1/options?generic_type=genType_prestation')\r\n            .then(response => response.json())\r\n            .then(result => {\r\n                setPrestationsList(result);\r\n            });\r\n    }, []);\r\n\r\n    const handleDrop = (event) => {\r\n        event.preventDefault();\r\n        const prestationId = event.dataTransfer.getData('text');\r\n        const prestation = prestationsList.find(p => p.id.toString() === prestationId);\r\n        if (prestation) {\r\n            setPrestationName(prestation.value);\r\n        }\r\n    };\r\n\r\n    const handleDragOver = (event) => {\r\n        event.preventDefault();\r\n    };\r\n    const handlePrestationCostChange = (event) => {\r\n        setPrestationCost(event.target.value);\r\n    };\r\n\r\n    const handlePrestationDurationChange = (event) => {\r\n        setPrestationDuration(event.target.value);\r\n    };\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        const data = {\r\n            practician_id: practicianId,\r\n            prestation_name: prestationName,\r\n            prestation_cost: prestationCost,\r\n            prestation_duration: prestationDuration,\r\n        };\r\n\r\n        fetch('/wp-json/booker67/v1/prestations', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data),\r\n        })\r\n            .then((response) => response.json())\r\n            .then((result) => {\r\n                console.log(result);\r\n                // Vous pouvez ajouter ici du code pour gérer le résultat de la requête\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error:', error);\r\n            });\r\n    };\r\n\r\n    return (<div>\r\n        <GenericOptionsAdder genericTypeProp={'prestation'} maxAllowed={3}/>\r\n        <hr/>\r\n        <p><h2>Affectation de prestation</h2></p>\r\n        <div style={{ display: 'flex' }}>\r\n            <form onSubmit={handleSubmit} style={{ flex: 1 }}>\r\n                <HumanRessourcesActifSelect  handleHumanRessourceChange={handleHumanRessourceChange}/>\r\n                <div\r\n                    onDrop={handleDrop}\r\n                    onDragOver={handleDragOver}\r\n                    style={{ border: '1px solid black', minHeight: '50px', marginBottom: '10px' }}\r\n                >\r\n                    {prestationName}\r\n                </div>\r\n                <label>\r\n                    Coût:\r\n                    <input\r\n                        type=\"text\"\r\n                        value={prestationCost}\r\n                        onChange={(e) => setPrestationCost(e.target.value)}\r\n                    />\r\n                </label>\r\n                <label>\r\n                    Durée:\r\n                    <input\r\n                        type=\"text\"\r\n                        value={prestationDuration}\r\n                        onChange={(e) => setPrestationDuration(e.target.value)}\r\n                    />\r\n                </label>\r\n                <button type=\"submit\">Sauvegarder</button>\r\n            </form>\r\n            <div style={{ flex: 1, marginLeft: '10px' }}>\r\n                <h3>Liste des prestations</h3>\r\n                <ul>\r\n                    {prestationsList.map((prestation) => (\r\n                        <li\r\n                            key={prestation.id}\r\n                            draggable=\"true\"\r\n                            onDragStart={(event) => event.dataTransfer.setData('text', prestation.id.toString())}\r\n                        >\r\n                            {prestation.value}\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default PrestationForm;\r\n        /*\r\n    };\r\n\r\n    return (<div>\r\n            <GenericOptionsAdder genericTypeProp={'prestation'} maxAllowed={3}/>\r\n            <hr/>\r\n            <p><h2>Affectation de prestation</h2></p>\r\n        <form onSubmit={handleSubmit}>\r\n            <HumanRessourcesActifSelect\r\n                handleHumanRessourceChange={handleHumanRessourceChange}\r\n            />\r\n            <div>\r\n                <label>\r\n                    Nom de la prestation:\r\n                    <input\r\n                        type=\"text\"\r\n                        value={prestationName}\r\n                        onChange={handlePrestationNameChange}\r\n                    />\r\n                </label>\r\n            </div>\r\n            <div>\r\n                <label>\r\n                    Coût de la prestation:\r\n                    <input\r\n                        type=\"number\"\r\n                        value={prestationCost}\r\n                        onChange={handlePrestationCostChange}\r\n                    />\r\n                </label>\r\n            </div>\r\n            <div>\r\n                <label>\r\n                    Durée de la prestation:\r\n                    <input\r\n                        type=\"time\"\r\n                        value={prestationDuration}\r\n                        onChange={handlePrestationDurationChange}\r\n                    />\r\n                </label>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">Enregistrer</button>\r\n            </div>\r\n        </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PrestationForm;*/"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}