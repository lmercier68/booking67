"use client";
import {
  dispatch
} from "./7JP5HWUW.js";
import {
  flushMicrotasks,
  wrapAsync
} from "./LHKK7Y5F.js";

// src/focus.ts
import { getActiveElement } from "@ariakit/core/utils/dom";
import { isFocusable } from "@ariakit/core/utils/focus";
import { invariant } from "@ariakit/core/utils/misc";
function focus(element) {
  return wrapAsync(async () => {
    invariant(element, "Unable to focus on null element");
    if (getActiveElement(element) === element)
      return;
    if (!isFocusable(element))
      return;
    const activeElement = getActiveElement(element);
    if (activeElement == null ? void 0 : activeElement.dirty) {
      await dispatch.change(activeElement);
      activeElement.dirty = false;
    }
    element.focus();
    await flushMicrotasks();
  });
}

export {
  focus
};
